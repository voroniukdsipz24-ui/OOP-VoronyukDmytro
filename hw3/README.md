
# Принципи ISP та DIP

## Принцип ISP (Interface Segregation Principle)

Принцип поділу інтерфейсів (ISP) є одним з основних принципів об'єктно-орієнтованого програмування, згідно з яким великі інтерфейси повинні бути розбиті на менші, спеціалізовані інтерфейси. Це означає, що клієнт повинен залежати тільки від методів, які він використовує, а не від усіх методів великого інтерфейсу. Такий підхід забезпечує більшу гнучкість і знижує залежність між компонентами програми.

### Приклад порушення ISP

Уявімо, що ми маємо інтерфейс для обробки документів:

```csharp
public interface IDocumentProcessor
{
    void PrintDocument();
    void SaveDocument();
    void LoadDocument();
    void ConvertDocumentToPdf();
}
```

Цей інтерфейс може порушувати ISP, якщо, скажімо, клас, який реалізує цей інтерфейс, пов'язаний тільки з одним типом операцій, наприклад, друком, але змушений реалізовувати всі методи, навіть ті, що йому не потрібні.

### Як виправити порушення ISP

Ми можемо розбити інтерфейс на більш спеціалізовані частини:

```csharp
public interface IPrintable
{
    void PrintDocument();
}

public interface IStorable
{
    void SaveDocument();
    void LoadDocument();
}

public interface IConvertible
{
    void ConvertDocumentToPdf();
}
```

Тепер класи можуть реалізовувати тільки ті інтерфейси, які їм потрібні, тим самим зменшуючи кількість непотрібних залежностей і підвищуючи гнучкість коду.

## Принцип DIP (Dependency Inversion Principle)

Принцип інверсії залежностей (DIP) стверджує, що високий рівень абстракції (наприклад, бізнес-логіка) не повинен залежати від низького рівня (наприклад, конкретних реалізацій). Замість цього обидва рівні повинні залежати від абстракцій. Це дозволяє зробити код більш гнучким, модульним та зручним для тестування.

### Переваги DIP через Dependency Injection

Dependency Injection (DI) — це техніка реалізації DIP, коли залежності (наприклад, сервіси чи репозиторії) передаються класу через його конструктор, властивості або методи, замість того, щоб створювати їх всередині класу. Це дозволяє зменшити жорсткі зв'язки між компонентами, підвищує тестованість та робить код більш гнучким.

```csharp
public class DocumentService
{
    private readonly IStorable _storable;

    public DocumentService(IStorable storable)
    {
        _storable = storable;
    }

    public void SaveDocument()
    {
        _storable.SaveDocument();
    }
}
```

У цьому прикладі клас `DocumentService` залежить від абстракції `IStorable`, а не від конкретної реалізації, що дозволяє змінювати способи збереження документів без зміни коду класу `DocumentService`.

## Як "вузькі" інтерфейси (ISP) сприяють кращому DI та тестуванню

"Вузькі" інтерфейси дозволяють ефективно використовувати Dependency Injection, оскільки дають можливість чітко визначити залежності та впливають на спрощення тестування. Оскільки інтерфейси спеціалізовані і мають обмежений набір методів, можна створювати окремі моки та тести для кожного компонента.

Наприклад, за допомогою DI можна інжектувати лише необхідні залежності для конкретних класів. Це спрощує тестування, оскільки моки або фейкові реалізації будуть меншими та простішими для налаштування. Чим менше і спеціалізованіше інтерфейси, тим легше тестувати їх окремо без зайвих залежностей.

## Підсумок

Принципи ISP та DIP забезпечують гнучкість, спрощують тестування та покращують структуру програмного коду. Розділення інтерфейсів на більш спеціалізовані частини за допомогою ISP дозволяє зменшити залежності між компонентами, а впровадження DIP через Dependency Injection робить систему менш залежною від конкретних реалізацій, що дає можливість гнучко змінювати компоненти та покращувати тестування.
